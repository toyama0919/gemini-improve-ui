# Chrome Extension for Gemini UI

## Core Rules

**Selectors**: ARIA > semantic > class names. Always provide multiple fallbacks
```javascript
const el = document.querySelector('[aria-label*="Foo"]') || 
           document.querySelector('[data-test-id="foo"]') || 
           document.querySelector('.foo');
```

**Settings**: Define defaults in `settings.js` → Add UI in `options.html` → Implement save logic in `options.js` → Persist with `chrome.storage.sync`

**Async Waiting**: Use `setInterval` with max 10 retries at 200ms-2000ms intervals

**Errors**: Fail silently. No console spam. Graceful degradation.

## Development

**DOM Changes**: `Ctrl+Shift+D` exports DOM structure → AI analysis → Update fallback selectors

**Chrome DevTools MCP**: `./dev.sh start` launches debug Chrome → Cursor auto-connects → `./dev.sh stop` to terminate

**Troubleshooting**: 
- MCP fails → Check Node 20.19.0+, restart Chrome/Cursor
- Shortcuts inactive → Reload at `chrome://extensions/`
- Styles not applied → Check `--chat-max-width` in DevTools, hard reload
